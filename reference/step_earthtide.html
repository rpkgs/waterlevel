<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Lagged Earth tide response — step_earthtide • waterlevel</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Lagged Earth tide response — step_earthtide"><meta property="og:description" content="`step_earthtide` creates a *specification* of a recipe step
 that are the Earth tide harmonics for a particular
 location.  Requires the *earthtide* package"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">waterlevel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/responsefunctions.html">Response functions</a>
    </li>
    <li>
      <a href="../articles/staticbe.html">Static Barometric/Loading Efficiency Calculations</a>
    </li>
    <li>
      <a href="../articles/synthetic_example.html">Synthetic example</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Lagged Earth tide response</h1>

    <div class="hidden name"><code>step_earthtide.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>`step_earthtide` creates a *specification* of a recipe step
 that are the Earth tide harmonics for a particular
 location.  Requires the *earthtide* package</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">step_earthtide</span><span class="op">(</span></span>
<span>  <span class="va">recipe</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  role <span class="op">=</span> <span class="st">"earthtide"</span>,</span>
<span>  trained <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"gravity"</span>,</span>
<span>  astro_update <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  latitude <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  longitude <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  elevation <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  azimuth <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  gravity <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  earth_radius <span class="op">=</span> <span class="fl">6378136.3</span>,</span>
<span>  earth_eccen <span class="op">=</span> <span class="fl">0.0066943979514</span>,</span>
<span>  cutoff <span class="op">=</span> <span class="fl">1e-06</span>,</span>
<span>  wave_groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  catalog <span class="op">=</span> <span class="st">"ksm04"</span>,</span>
<span>  eop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  prefix <span class="op">=</span> <span class="st">"earthtide_"</span>,</span>
<span>  default <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  skip <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  id <span class="op">=</span> <span class="fu">rand_id</span><span class="op">(</span><span class="st">"earthtide"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-recipe">recipe<a class="anchor" aria-label="anchor" href="#arg-recipe"></a></dt>
<dd><p>A recipe object. The step will be added to the sequence of
operations for this recipe.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>One or more selector functions to choose which
variables are affected by the step. See [selections()]
for more details. For the `tidy` method, these are not
currently used.</p></dd>


<dt id="arg-role">role<a class="anchor" aria-label="anchor" href="#arg-role"></a></dt>
<dd><p>Defaults to "earthtide"</p></dd>


<dt id="arg-trained">trained<a class="anchor" aria-label="anchor" href="#arg-trained"></a></dt>
<dd><p>A logical to indicate if the quantities for preprocessing have
been estimated.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>One or more of "gravity",
"tidal_potential", "tidal_tilt", "vertical_displacement",
"horizontal_displacement", "n_s_displacement", "e_w_displacement",
"vertical_strain", "areal_strain", "volume_strain", "horizontal_strain",
or "ocean_tides", "pole_tide", "lod_tide". The pole tide and lod_tide
are used in predict mode even if do_predict is FALSE. More than one value
can only be used if do_predict == TRUE.</p></dd>


<dt id="arg-astro-update">astro_update<a class="anchor" aria-label="anchor" href="#arg-astro-update"></a></dt>
<dd><p>How often to update astro parameters in number of
samples. This speeds up code but may make it slightly less accurate.</p></dd>


<dt id="arg-latitude">latitude<a class="anchor" aria-label="anchor" href="#arg-latitude"></a></dt>
<dd><p>The station latitude (numeric) defaults to 0.</p></dd>


<dt id="arg-longitude">longitude<a class="anchor" aria-label="anchor" href="#arg-longitude"></a></dt>
<dd><p>The station longitude (numeric) defaults to 0.</p></dd>


<dt id="arg-elevation">elevation<a class="anchor" aria-label="anchor" href="#arg-elevation"></a></dt>
<dd><p>The station elevation (m) (numeric) defaults to 0.</p></dd>


<dt id="arg-azimuth">azimuth<a class="anchor" aria-label="anchor" href="#arg-azimuth"></a></dt>
<dd><p>Earth azimuth (numeric) defaults to 0.</p></dd>


<dt id="arg-gravity">gravity<a class="anchor" aria-label="anchor" href="#arg-gravity"></a></dt>
<dd><p>Gravity at the station (m/s^2) (numeric) 0 to
estimate gravity from elevation and latitude.</p></dd>


<dt id="arg-earth-radius">earth_radius<a class="anchor" aria-label="anchor" href="#arg-earth-radius"></a></dt>
<dd><p>Radius of earth (m) (numeric) defaults to 6378136.3</p></dd>


<dt id="arg-earth-eccen">earth_eccen<a class="anchor" aria-label="anchor" href="#arg-earth-eccen"></a></dt>
<dd><p>Eccentricity of earth (numeric)
defaults to 6.69439795140e-3</p></dd>


<dt id="arg-cutoff">cutoff<a class="anchor" aria-label="anchor" href="#arg-cutoff"></a></dt>
<dd><p>Cutoff amplitude for constituents (numeric)
defaults to 1e-6.</p></dd>


<dt id="arg-wave-groups">wave_groups<a class="anchor" aria-label="anchor" href="#arg-wave-groups"></a></dt>
<dd><p>Two column data.frame having start and end of
frequency groups (data.frame). This data.frame must have two columns
with the names 'start', and 'end' signifying the start and end of the
wave groupings.  An optional third column 'multiplier' can be provided
to scale the particular wave group.  If column names do no match, the
inferred column positions are start, end, multiplier.</p></dd>


<dt id="arg-catalog">catalog<a class="anchor" aria-label="anchor" href="#arg-catalog"></a></dt>
<dd><p>Use the "hw95s" catalog or "ksm04" catalog (character).</p></dd>


<dt id="arg-eop">eop<a class="anchor" aria-label="anchor" href="#arg-eop"></a></dt>
<dd><p>User defined Earth Orientation Parameter (EOP) data.frame with the
following columns: datetime, ddt, ut1_utc, lod, x, y, dx, dy</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>Scale results when do_predict is FALSE</p></dd>


<dt id="arg-prefix">prefix<a class="anchor" aria-label="anchor" href="#arg-prefix"></a></dt>
<dd><p>A prefix for generated column names, default to
"earthtide_".</p></dd>


<dt id="arg-default">default<a class="anchor" aria-label="anchor" href="#arg-default"></a></dt>
<dd><p>Passed to <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">dplyr::lag()</a></code>, determines what fills empty rows
left by lagging (defaults to NA).</p></dd>


<dt id="arg-columns">columns<a class="anchor" aria-label="anchor" href="#arg-columns"></a></dt>
<dd><p>A character string of the selected variable names. This field
is a placeholder and will be populated once <code><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep()</a></code> is used.</p></dd>


<dt id="arg-skip">skip<a class="anchor" aria-label="anchor" href="#arg-skip"></a></dt>
<dd><p>A logical. Should the step be skipped when the recipe is baked by
<code><a href="https://recipes.tidymodels.org/reference/bake.html" class="external-link">bake()</a></code>? While all operations are baked when <code><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep()</a></code> is run, some
operations may not be able to be conducted on new data (e.g. processing the
outcome variable(s)). Care should be taken when using <code>skip = TRUE</code> as it
may affect the computations for subsequent operations.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>A character string that is unique to this step to identify it.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An updated version of `recipe` with the new step
 added to the sequence of existing steps (if any). For the
 `tidy` method, a tibble with columns `terms` which is
 the columns that will be affected and `holiday`.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>`step_earthtide` calculates the Earth tide harmonics</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>[step_earthtide()] [recipe()]
  [prep.recipe()] [bake.recipe()]</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jkennel/earthtide" class="external-link">earthtide</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">transducer</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eterna_wavegroups</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span><span class="va">wl</span> <span class="op">~</span> <span class="va">.</span>,</span></span>
<span class="r-in"><span>              data <span class="op">=</span> <span class="va">transducer</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">datetime</span>, <span class="va">wl</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">eterna_wavegroups</span><span class="op">[</span><span class="va">eterna_wavegroups</span><span class="op">$</span><span class="va">time</span> <span class="op">==</span> <span class="st">'1 month'</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">with_et</span> <span class="op">&lt;-</span> <span class="va">rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">step_earthtide</span><span class="op">(</span><span class="va">datetime</span>, </span></span>
<span class="r-in"><span>                 latitude <span class="op">=</span> <span class="fl">34</span>, </span></span>
<span class="r-in"><span>                 longitude <span class="op">=</span> <span class="op">-</span><span class="fl">118.5</span>, </span></span>
<span class="r-in"><span>                 wave_groups <span class="op">=</span> <span class="va">wg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span></span>
<span class="r-in"><span>  <span class="fu">prep</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">juice</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jonathan Kennel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

